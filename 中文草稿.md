# 摘要

# Introduction
## background
网购平台日益崛起，由于订单不受时间、地点的限制和送货上门等优势，许多用户选择在网上购物。但是在网购平台上，用户看不到实物，只能通过商品图片和简介来了解商品，这催生了**评论机制**，即已购买者可以通过星级来表达他们对产品的满意度，还可以通过文本来表达对产品的更多意见和信息。其他客户可以通过阅读这些评论，来协助他们的购买决策。公司也会根据这些评论数据来改进产品设计的优缺点。

但我们发现，并不是所有评论同样有参考价值。有些人的评论过于笼统简略；有些人给出的评级与他们的评价内容并不相符；甚至存在一些刻意颠倒黑白的评论，例如来自竞争对手的恶意抹黑或公司通过收买评论者而得到的好评。因此在使用数据来辅助商业决策时，相比于计算星级的平均分等简单策略，我们需要综合分析星级、评论内容和评论时间等数据来得到更为准确的结果。
In recent years, quantities of customers prefer to shopping online for its less spacetime limitation and the convenient home delivery service. However, compared to the traditional physical stores, customers can only evaluate products by the provided profile and pictures instead of seeing or testing the real ones. The information gap here is one of the leading causes of dissatisfied purchases. To help customers know the product better, many online marketplace platforms, such as Amazon, launch a "review system". Customers can express their level of satisfaction and further opinions or information about purchases through rating and reviewing. That additional information can help not only other customers make purchasing decisions, but companies improve the pros and cons of product design.
However, we found that not all reviews are equally relevant. Some reviews are too general; some people's ratings do not match their reviews; there are even deliberately misleading reviews, such as malicious defamation from competitors or the raise by the bribed reviewers. Therefore, when using data to assist business decisions, we need to analyze data carefully and comprehensively to obtain more accurate results. More factors should be considered, such as the ratings, review contents and review time, rather than straightly calculate the average rating level.
> 已翻译

## problem analysis
- 通过分析三个产品数据集，描述有助于评估产品的星级、评论和帮助等级的定量和/或定性模式、关系、度量和参数，并用数据证明他们确实有用。
- 通过建模解决以下问题
	- 根据ratings和reviews确定一个最informative的度量，这个度量可以跟踪三种产品上市后的产品评级。
	- 分别在三个数据集里，分析产品评级和时间的关系
	- 寻找能影响产品评级拐点的关键因素。
	- 分析一段时间内是否会有较为集中的好评或差评，客户star rating是否会被最近评论影响。
	- 评级star rating和评论内容review的关键字是否匹配。

## Data
### DataSource
> 已翻译

### 前期处理
- 删除冗余
  - 地区marketplace
  - 商品种类product_category;
  - 没有使用：评论标识review_id; 产品标识product_id
- 删除错误数据
	- verify_purchase == N的评论全部删除

# Assumption
- 商家的目的：通过优质评论和近期评论引导用户购买产品
	- 根据题目要求理解得到
- 评论内容和星级评定应保持基本一致，不一致时人们更相信评论
	- 基于大众心理，真实的语言更令人信服
- 特邀测评员的评论更可信 `vine == Y`，不包含因免费获得产品而打高分的主观性因素
	- 由网购平台选出的特邀测评员是有大数据支持的，他们的评价更为客观、有效。
- 实际购买人的评论更可信 `verify_purchase == Y`
	- 已经体验过产品的人更了解产品的真实性能
- 实际未购买人的评论完全不可信 `verify_purchase == N`
	- 列出未购买人与购买人与全体之间1-5星的分布，可以看出未购买人中1星较其他两项多很多，考虑是竞争对手恶意评论或已购买人不满意产品或服务从而邀请亲友（未购买）为其打低分来报复商家。

# Nomenclature
- 

# ModelDesign

## 数据标准化
- 星级和评论相关性较高，分别处理后综合成一个参数（差异过大删除/两个分数按比例加权）
  - 星级：1-5星，量化为0-1的值。如3星对应0.6
  - 评论：据LDA模型推出的5个主题，每个主题对应一个等级，将评论内容量化为0-1的值

## 评论内容评级
- 先用词频统计全部评论的词汇，找出来其中带有倾向性的词，人为设置为好、一般、差三个等级
- 再统计好、一般、差三种词汇在star rating的1-5星中分布情况
	- 设好词在1星中出现的概率为p11，2星中为p12，3星中为p13，...
	- 设一般词在1星中出现的概率为p21，2星中为p22，3星中为p23，...
	- 设差词在1星中出现的概率为p31，2星中为p32，3星中为p33，...
- 再回到评论，统计好、一般、差词出现的次数。好+1，一般0，差-1（施工中，还没写完）
- 这样统计出来所有评论对应一个值，这个值就是评论内容评级。但怎么能归一化，能和1-5星对上，还需要统计一下所有评论内容评级的分布情况再人为划分一下

## 评论质量评级
自变量：评论字数、评论者认证、评论时长、评论语义等级等

因变量：评论质量等级，~~即投票数~~

  - 投票数量/比例
  - 字数（一定字数一下乘上0~1的系数，一定字数以上权重为1）
    - 文献“A study of factors..."，文中分界值为 144
  - 测评员权重提高
  - 没有购买的人权重降低/或删除
  - 匹配（与评论内容反差过大的筛掉）
  - 刷评论（多次评论衰减）
  - 认证

# 第一题
## 分析提供的三个产品数据集，以使用数学证据来识别，描述和支持有意义的定量和/或定性模式，关系，量度和参数，这些数据将在有助于评估阳光公司的星级，评论和帮助等级之内和之间在三个新的在线市场产品中都取得了成功。
### hair_dryer
- 总评论数：11470
- 总客户数（有客户重复购买）：11350

- vine N:Y = 11291: 179
	- scale N:Y = 98.44%: 1.56%
- verified_purchase N:Y = 1659: 9811
	- scale N:Y = 14.46%: 85.54%

- 1star: 2star: 3star: 4star: 5star = 1032: 639: 999: 2096: 6704
- scale: 1: 2: 3: 4: 5 = 9.00%: 5.57%: 8.71%: 18.27%: 58.45%
- 好评率（4+5star）76.72%

- 删除`verified_purchase == N`后：
	- 1star: 2star: 3star: 4star: 5star = 739: 509: 859: 1804: 5900
	- scale: 1: 2: 3: 4: 5 = 7.53%: 5.19%: 8.76%: 18.39%: 60.14% 
	- 好评率（4+5star）78.53%

- 删除`vine == N`后：
	- 1star: 2star: 3star: 4star: 5star = 0: 3: 20: 51: 105
	- scale: 1: 2: 3: 4: 5 = 0%：1.68%：11.17%： 28.49%： 58.66%
	- 好评率（4+5star）87.15%
	
### microwave
- 总评论数：1615
- 总客户数（有客户重复购买）：1614

- vine N:Y = 1596: 19
	- scale N:Y = 98.82%: 1.18%
- verified_purchase N:Y = 520: 1095
	- scale N:Y = 32.20%: 67.80%

- 1star: 2star: 3star: 4star: 5star = 402: 112: 134: 300: 667
- scale: 1: 2: 3: 4: 5 = 24.89%: 6.93%: 8.30%: 18.58%: 41.30%
- 好评率（4+5star）59.88%

- 删除`verified_purchase == N`后：
	- 1star: 2star: 3star: 4star: 5star = 116: 56: 92: 249: 582
	- scale: 1: 2: 3: 4: 5 = 10.60%: 5.11%: 8.40%: 22.74%: 53.15% 
	- 好评率（4+5star）75.89%

- 删除`vine == N`后：
	- 1star: 2star: 3star: 4star: 5star = 0: 0: 2: 8: 9
	- scale: 1: 2: 3: 4: 5 = 0%：0%：10.53%： 42.10%： 47.37%
	- 好评率（4+5star）89.47%
	
### pacifier
- 总评论数：18937
- 总客户数（有客户重复购买）：17661

- vine N:Y = 18804: 133
	- scale N:Y = 99.30%: 0.70%
- verified_purchase N:Y = 2678: 16259
	- scale N:Y = 14.14%: 85.86%

- 1star: 2star: 3star: 4star: 5star = 1191: 944: 1426: 2716: 12660
- scale: 1: 2: 3: 4: 5 = 6.29%: 4.98%: 7.53%: 14.34%: 66.86%
- 好评率（4+5star）81.2%

- 删除`verified_purchase == N`后：
	- 1star: 2star: 3star: 4star: 5star = 892: 783: 1233: 2340: 11011
	- scale: 1: 2: 3: 4: 5 = 5.49%: 4.82%: 7.58%: 14.39%: 67.72% 
	- 好评率（4+5star）82.11%

- 删除`vine == N`后：
	- 1star: 2star: 3star: 4star: 5star = 3: 2: 14: 43: 71
	- scale: 1: 2: 3: 4: 5 = 2.25%：1.50%：10.53%： 32.33%： 53.39%
	- 好评率（4+5star）85.72%


- 方向1
	- 在数据中找出一些测度，例如可以计算单个用户的评论分数，再综合计算这个产品的综合分数。（分数为一个例子，具体的测度可以有许多种，简单的有好评率，复杂的有产品的功能性得分，情感得分） 
- 方向2
	- 可以看为数据挖掘的准备工作，可以看作数据预处理。最主要的将不蕴含或者蕴含较少实际意义的数据作剔除或者合理处理。其中不可忽视的数据是vine和verified_purchase。因为这两项数据大大程度的影响了评级和评论的重要程度，根据现实生活的情形作合理处理即可。
- 方向3
	- 将综合后的星级根据评论质量加权综合计算出商品的评分？

- nlp方法涉及如何估计语法结构和句子成分，模型大而不当，在预处理阶段使用这么大的模型属于严重跑题。题目的重点在于发掘文本与评分的联系，以及对评分建立时间轴向的回归方程。预处理阶段的根本目的只是将文本转化为数值结果，使它能参与到方程计算中成为一个代数量。因此重点考虑基于词频的回归方程，对文本的关键词情感构成进行特征分析，而不是暴力nlp。现在在知乎上喊nlp解C题的，80%是小白，另外20%是没做过美赛的nlp学术圈人员。（？

# 第二题

## a
- 基于rating和review来建模，其中rating包括星级评级和评论质量评级，review为评论
- 星级越高，说明产品越好；
- 评论越好，说明产品越好；
- 评论质量越高，说明评论越可信。

## b
产品评级（标准化处理后的评级）与时间的关系
- 产品评级参照a，将星级和评论合二为一
- 时间处理：一段时间内的好评差评按照权重进行综合
- 建立“时间-评级”模型，将产品评论转化为数值，数值越高评级越好。可以做出一条随时间变化的评级曲线。
- 对拐点进行分析
> 是有人发了好评，引起了更多人的共鸣？
> 是有黑子带节奏，让不知情的人也来诋毁你的产品？
> 还是什么其他原因？
- 最后得出基于时间的度量方法和模式，分析基于时间的产品声誉变化。
- 马尔可夫过程不知能否用上

## c
- 类似b
- 在不同的逻辑模式下分析，寻找能影响产品评级拐点的关键因素。这里还是可以将文本评论和评级综合起来，然后寻找一个“能预测未来产品口碑的事件点或原因”。
选特征，相关性分析或者从机器学习的特征选择角度或者从信息论的互信息量来考虑。
PS：类似于股市中的“利好消息”、“利空消息（即变差的意思）”，一旦某天出现了利好/利空消息，之后的时间就会跟随这个消息发生涨跌变化。

## d
- 在这个问题中，只需要在前几问的时间模式基础下，分析一段时间内是否会有较为集中的好评或差评即可。
- 当然也可以说客户不容易被带动情绪，只有数据充分、言之有理即可。

## e
- 这个是前面我在a中提到的一点，如何对评论内容和评级进行关联。e题这一问确实需要对文本进行语义分析，确实涉及到“自然语言处理NLP”的知识。
- 一般来说的话，文本评论越热情，评级当然会越高——“爱死这个宝贝啦！五星！！！”、“垃圾产品一生黑，给一颗星都嫌多，怎么不能给负的星？”

通过训练LDA主题模型对三种产品所有评价进行分析，提取出来的五个模型分别根据其情感语意划分为五个等级，再分别对每个评级的主题进行分析，得到了五个主题的占比，相互比较，如情感表达级别较高的在高星级中比例较高，级别较低的在高星级中比例较高，即可得出评分和星级有关。（此方法比较直接）
……（图片）
……结论

通过训练LDA主题模型对三种产品所有评价进行分析，提取出来的五个模型分别根据其情感语意划分为五个等级，分别对应着1-5星，将每个评论进行LDA主题提取，按照主题比例算出对应星级，新星级与原星级间计算相似度，若较高，则说明确实相关。（之前得出的结果不是很好，但可能调一下LDA模型再删掉过短的评论可以实现，效果未知）（方法比上面那个高级一点）
……（图片）
……结论


# 敏感度分析

# Conclusion
## 优势

## 缺点
- 数据较少，对于商品是否成功的判断依据不足

# Letter
